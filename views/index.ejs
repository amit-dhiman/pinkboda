<!DOCTYPE html>
<html lang="en">
<head>
  <title>Houzmart</title>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- <link rel="shortcut icon" href="/images/" type="image/x-icon"> -->

  <!-- Bootstrap CSS v5.2.0-beta1 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
  <!-- Data Table CSS -->
  <link rel='stylesheet' href='https://cdn.datatables.net/1.13.5/css/dataTables.bootstrap5.min.css'>
  <!-- Font Awesome CSS -->
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css'>
 
  <!-- custom css -->
  <link rel="stylesheet" href="/assets/css/styles.css" />
</head>

<body>
  <div class="container-fluid">
    <div class="row flex-nowrap">    
      <div class="col-md-3 left-sidebar" id="left">
        <div class="pt-5">
          <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-4 col-sm-12 d-flex justify-content-center">
              <a href="" class=""><img class="logo_img" src="/images/logo.png" width="100px" /></a>
            </div>
          </div>
          <div class="col-md-4"></div>
          <hr class="line" />
          <ul class="nav nav-pills flex-column" id="menu">
            <li class="nav-item active" id="project_feed">
              <a href="/admin/renderIndex" class="nav-link align-middle"><img src="/images/users.png" width="20px"/><span class="ms-3">All User</span></a>
            </li>
            <li class="nav-item" id="Membership">
              <a href="/admin/renderRider" class="nav-link align-middle"> <img src="/images/rider.png" width="20px"/><span class="ms-3">Riders</span></a>
            </li>
            <li class="nav-item" id="Photo_feed">
              <a href="/admin/renderDriver" class="nav-link align-middle"> <img src="/images/driver.png" width="20px"/><span class="ms-3">Drivers</span></a>
            </li>
            <li class="nav-item" id="Askbob">
              <a href="/admin/renderHelpSupport" class="nav-link align-middle"><img src="/images/help.png" width="20px"/><span class="ms-3">Manage Help & Support</span></a>
            </li>
            <li class="nav-item" id="Membership">
              <a href="/admin/Terms&Conditions.ejs" class="nav-link align-middle"><img src="/images/term.png" width="17px"/><span class="ms-3">Terms & Conditions</span></a>
            </li>
            <li class="nav-item" id="Photo_feed">
              <a href="/admin/massPushPage" class="nav-link align-middle"> <img src="/images/mass.png" width="17px"/><span class="ms-3">Mass push</span></a>
            </li>
            <li class="nav-item" id="Askbob">
              <a href="/admin/renderProfile" class="nav-link align-middle"> <img src="/images/profile.png" width="17px"/><span class="ms-3">Profile</span></a>
            </li>
          </ul>
        </div>
      </div>

      <div class="col-md-9 mt-4">
        <div class="row">
          <!-- add Navbar here -->

      <nav class="navbar">
        <div class="container-fluid">
          <a class="navbar-brand" href="#"></a>
          <button class="navbar-toggler" id="toggle" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
          </button>
        </div>
      </nav>
      <div class="col-md-8 col-12">
        <div class="search-bar">
          <img src="/images/search.png" />
          <input type="search" id="searchInput" class="form-control search" placeholder="Search" />
        </div>
        </div>
        <div class="col-md-1 col-5">
          <div class="col-md-2 col-2">
            <div class="action">
              <img class="notification-img" src="/images/notifications.png" width="20px" onclick="menuToggle();" />
              <div class="menu">
                <h2>Notifications</h2>
                <div class="row g-3">
                  <div class="col-md-2 col-2">
                    <img class="img-notification" src="/images/notification1.png" />
                  </div>
                  <div class="col-md-9 col-10">
                    <h3 class="mess-txt"><span class="notification-txt">Elend Grod</span> sent you message</h3>
                    <p class="date-time">10/02/22 2:31 AM</p>
                  </div>
                  <div class="col-md-2 col-2">
                    <img class="img-notification" src="/images/notification2.png" />
                  </div>
                  <div class="col-md-9 col-10">
                    <h3 class="mess-txt"><span class="notification-txt">Jiyo lead</span> sent you message</h3>
                    <p class="date-time">10/02/22 2:31 AM</p>
                  </div>
                  <div class="col-md-2 col-2">
                    <img class="img-notification" src="/images/notification3.png" />
                  </div>
                  <div class="col-md-9 col-10">
                    <h3 class="mess-txt"><span class="notification-txt">Kixklo</span> sent you message</h3>
                    <p class="date-time">10/02/22 2:31 AM</p>
                  </div>
                  <div class="col-md-2 col-2">
                    <img class="img-notification" src="/images/notification4.png" />
                  </div>
                  <div class="col-md-9 col-10">
                    <h3 class="mess-txt"><span class="notification-txt">Leika Bask</span> sent you message</h3>
                    <p class="date-time">10/02/22 2:31 AM</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-7 d-flex justify-content-center align-items-center">
          <img class="img-profile" src="/uploads/admin/<%= getAdmin.profile_image %>" />
          <ul class="nav navbar-nav ms-auto" style="width: 67%">
            <li class="nav-item dropdown">
              <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Markous</a>
              <div class="dropdown-menu dropdown-menu-end">
                <div class="locker_img d-flex justify-content-center align-items-center">
                  <img src="/images/lock.png" />
                  <a href="/admin/getChangePasswordPage" class="dropdown-item">Change Password</a>
                </div>
                <div class="locker_img d-flex justify-content-center align-items-center">
                  <img src="/images/logout.png" />
                  <a href="" class="dropdown-item" style="color:#ff0000";>Logout</a>
                </div>
              </div>
            </li>
          </ul>
        </div>

          
          <div class="right-sidebar mt-4">
            <div class="row">
              <div class="col-md-3">
                <div class="total_users">
                  <div class="row">
                    <div class="col-md-4 d-flex justify-content-center align-items-center">
                      <img src="/images/Vector.png" />
                    </div>
                    <div class="col-md-8">
                      <h2><%= totalUsers.length %></h2>
                      <h3>Total User</h3>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="total_users">
                  <div class="row">
                    <div class="col-md-4 d-flex justify-content-center align-items-center">
                      <img src="/images/vector1.png" />
                    </div>
                    <div class="col-md-8">
                      <h2><%= getDrivers.length %></h2>
                      <h3>Total Drivers</h3>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="total_users">
                  <div class="row">
                    <div class="col-md-4 d-flex justify-content-center align-items-center">
                      <img src="/images/vector2.png" />
                    </div>
                    <div class="col-md-8">
                      <h2><%= getRiders.length %></h2>
                      <h3>Total Riders</h3>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="total_users">
                  <div class="row">
                    <div class="col-md-4 d-flex justify-content-center align-items-center">
                      <img src="/images/vector3.png" />
                    </div>
                    <div class="col-md-8">
                      <h2>$2,345</h2>
                      <h3>Total Earning</h3>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="users_tab">
              <ul class="nav nav-tabs project" id="myTab">
                <li class="nav-item project_tab">
                  <a href="#user" class="nav-link active" data-bs-toggle="tab">All User</a>
                </li>
                <li class="nav-item project-tab">
                  <a href="#riders" class="nav-link" data-bs-toggle="tab">Riders</a>
                </li>
                <li class="nav-item project-tab">
                  <a href="#drivers" class="nav-link" data-bs-toggle="tab">Drivers</a>
                </li>
              </ul>
              <div class="tab-content table-responsive">
                <div class="tab-pane fade show active" id="user">
                  <table id="example" class="table">
                    <thead>
                      <tr class="tabl-size user-example">
                        <th scope="col"></th>
                        <th scope="col">User Name</th>
                        <th scope="col">Contact</th>
                        <th scope="col">Profile</th>
                        <th scope="col">View</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="tabl_size">
                        <th scope="row"><img class="profile_img" src="/images/img.png" /></th>
                        <td>Waloi</td>
                        <td>232-324-45434</td>
                        <td>Rider</td>
                        <td><img class="three-dot" src="/images/dots.png" /></td>
                      </tr>
                      <% for(let i =0; i < totalUsers.length; i++) { %>
                        <tr class="tabl_size user-example">
                          <th scope="row"><img class="profile_img" src="<%=totalUsers[i].image ? totalUsers[i].image:totalUsers[i].profile_image%>"/></th>
                          <td><%= totalUsers[i].username %></td>
                          <td><%= totalUsers[i].mobile_number %></td>
                          <td><%= totalUsers[i].role %></td>
                          <td><img class="three-dot" src="/images/dots.png"/></td>
                        </tr>
                      <% } %>
                    </tbody>
                  </table>  
                </div>
                <div class="tab-pane fade" id="riders">
                  <table id="example1" class="table">  
                    <thead>
                      <tr class="tabl-size  all-example1">
                        <th scope="col"></th>
                        <th scope="col">User Name</th>
                        <th scope="col">Contact</th>
                        <th scope="col">Profile</th>
                        <th scope="col">View</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="tabl_size">
                        <th scope="row"><img class="profile_img" src="/images/img.png" /></th>
                        <td>Waloi</td>
                        <td>232-324-45434</td>
                        <td>Rider</td>
                        <td><img class="three-dot" src="/images/dots.png" /></td>
                      </tr>
                      <% for(let i =0; i < getRiders.length; i++) { %>
                        <tr class="tabl_size all-example1">
                          <th scope="row"><img class="profile_img" src="<%= getRiders[i].image%>"/></th>
                          <td><%= getRiders[i].username %></td>
                          <td><%= getRiders[i].mobile_number %></td>
                          <td><%= getRiders[i].role %></td>
                          <td><img class="three-dot" src="/images/dots.png"/></td>
                        </tr>
                      <% } %>
                    </tbody>
                  </table>
                </div>
                <div class="tab-pane fade" id="drivers">
                  <table id="example2" class="table">
                    <thead>
                      <tr class="tabl-size">
                        <th scope="col"></th>
                        <th scope="col">User Name</th>
                        <th scope="col">Contact</th>
                        <th scope="col">Profile</th>
                        <th scope="col">View</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="tabl_size">
                        <th scope="row"><img class="profile_img" src="/images/img.png" /></th>
                        <td>Waloi</td>
                        <td>232-324-45434</td>
                        <td>Driver</td>
                        <td><img class="three-dot" src="/images/dots.png" /></td>
                      </tr>
                      <% for(let i =0; i < getDrivers.length; i++) { %>
                        <tr class="tabl_size">
                          <th scope="row"><img class="profile_img" src="<%=getDrivers[i].profile_image %>" /></th>
                          <td><%= getDrivers[i].username %></td>
                          <td><%= getDrivers[i].mobile_number %></td>
                          <td><%= getDrivers[i].role %></td>
                          <td><img class="three-dot" src="/images/dots.png" /></td>
                        </tr>
                      <% } %>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- jQuery -->
  <script src='https://code.jquery.com/jquery-3.7.0.js'></script>
  <!-- Data Table JS -->
  <script src='https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js'></script>
  <script src='https://cdn.datatables.net/responsive/2.1.0/js/dataTables.responsive.min.js'></script>
  <script src='https://cdn.datatables.net/1.13.5/js/dataTables.bootstrap5.min.js'></script>

  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js"></script> -->

<script>
  function menuToggle() {
    const toggleMenu = document.querySelector(".menu");
    toggleMenu.classList.toggle("active");
  }
  
  const toggle = document.getElementById("toggle");
  const left = document.getElementById("left");
  const bodyClass = document.querySelector("body");
  toggle.onclick = function () {
    toggle.classList.toggle("active");
    left.classList.toggle("active");
    bodyClass.classList.toggle("bodyOverflow");
  };
</script>

<script type="text/javascript">

// Get the search input
const searchInput = document.getElementById("searchInput");

// Define an object to store original data for each table
const originalData = {};
// Define an object to store DataTable instances
const dataTableInstances = {};

document.addEventListener("DOMContentLoaded", function() {
  // Initialize all DataTables
  const tableIds = ["example", "example1", "example2"];

  tableIds.forEach(tableId => {
    const table = document.getElementById(tableId);
    if (table) {
      const tableRows = document.querySelectorAll(`#${tableId} .tabl_size`);
      originalData[tableId] = Array.from(tableRows);

      dataTableInstances[tableId] = new DataTable(table, {
        columnDefs: [{ orderable: false, targets: 4 }],
        language: {
          paginate: {
            previous: '<span class="fa fa-chevron-left"></span>',
            next: '<span class="fa fa-chevron-right"></span>'
          },
          lengthMenu: 'Display <select class="form-control input-sm">' +
            '<option value="10">10</option>' +
            '<option value="20">20</option>' +
            '<option value="30">30</option>' +
            '<option value="40">40</option>' +
            '<option value="50">50</option>' +
            '<option value="-1">All</option>' +
            '</select> results'
        }
      });
    }
  });

  // Add an input event listener to the shared search input
  searchInput.addEventListener('input', function () {
    const searchValue = searchInput.value.toLowerCase();
    
    // Iterate through each table
    tableIds.forEach(tableId => {
      const matchingRows = originalData[tableId].filter(row => {
        const fullNameCell = row.querySelector('td:nth-child(2)');
        return fullNameCell.textContent.toLowerCase().includes(searchValue);
      });

      // Clear and update the specific DataTable for this table
      if (dataTableInstances[tableId]) {
        dataTableInstances[tableId].clear();
        dataTableInstances[tableId].rows.add(matchingRows);
        dataTableInstances[tableId].draw();
      }
    });
  });
});


</script>
</body>
</html>
