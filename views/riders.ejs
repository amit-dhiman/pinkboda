<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Houzmart</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- <link rel="shortcut icon" href="/images/" type="image/x-icon"> -->

    <!-- Bootstrap CSS v5.2.0-beta1 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <!-- custom css -->
    <link rel="stylesheet" href="/assets/css/styles.css" />
  </head>

  <body>
    <div class="container-fluid">
      <div class="row flex-nowrap">
        <div class="col-md-3 left-sidebar" id="left">
          <div class="pt-5">
            <div class="row">
              <div class="col-md-4"></div>
              <div class="col-md-4 col-sm-12 d-flex justify-content-center">
                <a href="" class="">
                  <img class="logo_img" src="/images/logo.png" width="100px" />
                </a>
              </div>
            </div>
            <div class="col-md-4"></div>
            <hr class="line" />
            <ul class="nav nav-pills flex-column" id="menu">
              <li class="nav-item active" id="project_feed">
                <a href="/admin/renderIndex" class="nav-link align-middle"> <img src="/images/users.png" width="20px" /> <span class="ms-3">All User</span> </a>
              </li>
              <li class="nav-item" id="Membership">
                <a href="/admin/renderRider" class="nav-link align-middle"> <img src="/images/rider.png" width="20px" /> <span class="ms-3">Riders</span> </a>
              </li>
              <li class="nav-item" id="Photo_feed">
                <a href="/admin/drivers.ejs" class="nav-link align-middle"> <img src="/images/driver.png" width="20px" /> <span class="ms-3">Drivers</span></a>
              </li>
              <li class="nav-item" id="Askbob">
                <a href="/admin/help&support.ejs" class="nav-link align-middle"> <img src="/images/help.png" width="20px" /> <span class="ms-3">Manage Help & Support</span></a>
              </li>
              <li class="nav-item" id="Membership">
                <a href="/admin/Terms&Conditions.ejs" class="nav-link align-middle"> <img src="/images/term.png" width="17px" /> <span class="ms-3">Terms & Conditions</span> </a>
              </li>
              <li class="nav-item" id="Photo_feed">
                <a href="/admin/mass_push.ejs" class="nav-link align-middle"> <img src="/images/mass.png" width="17px" /> <span class="ms-3">Mass push</span></a>
              </li>
              <li class="nav-item" id="Askbob">
                <a href="/admin/profile.ejs" class="nav-link align-middle"> <img src="/images/profile.png" width="17px" /> <span class="ms-3">Profile</span></a>
              </li>
            </ul>
          </div>
        </div>

        <div class="col-md-9 mt-4">
          <div class="row">
            <nav class="navbar">
              <div class="container-fluid">
                <a class="navbar-brand" href="#"></a>
                <button class="navbar-toggler" id="toggle" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                </button>
              </div>
            </nav>
            <div class="col-md-8 col-12">
              <div class="search-bar">
                <img src="/images/search.png" />
                <input type="search" id="form1" class="form-control search" placeholder="Search" />
              </div>
            </div>
            <div class="col-md-1 col-5">
              <div class="col-md-2 col-2">
                <div class="action">
                  <img class="notification-img" src="/images/notifications.png" width="20px" onclick="menuToggle();" />
                  <!-----------------------Notification section is here------------>
                  <div class="menu">
                    <h2>Notifications</h2>
                    <div class="row g-3">
                      <div class="col-md-2 col-2">
                        <img class="img-notification" src="/images/notification1.png" />
                      </div>
                      <div class="col-md-9 col-10">
                        <h3 class="mess-txt"><span class="notification-txt">Elend Grod</span> sent you message</h3>
                        <p class="date-time">10/02/22 2:31 AM</p>
                      </div>
                      <div class="col-md-2 col-2">
                        <img class="img-notification" src="/images/notification2.png" />
                      </div>
                      <div class="col-md-9 col-10">
                        <h3 class="mess-txt"><span class="notification-txt">Jiyo lead</span> sent you message</h3>
                        <p class="date-time">10/02/22 2:31 AM</p>
                      </div>
                      <div class="col-md-2 col-2">
                        <img class="img-notification" src="/images/notification3.png" />
                      </div>
                      <div class="col-md-9 col-10">
                        <h3 class="mess-txt"><span class="notification-txt">Kixklo</span> sent you message</h3>
                        <p class="date-time">10/02/22 2:31 AM</p>
                      </div>
                      <div class="col-md-2 col-2">
                        <img class="img-notification" src="/images/notification4.png" />
                      </div>
                      <div class="col-md-9 col-10">
                        <h3 class="mess-txt"><span class="notification-txt">Leika Bask</span> sent you message</h3>
                        <p class="date-time">10/02/22 2:31 AM</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-3 col-7 d-flex justify-content-center align-items-center">
              <img class="img-profile" src="/images/img.png" />
              <ul class="nav navbar-nav ms-auto" style="width: 67%">
                <li class="nav-item dropdown">
                  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Markous</a>
                  <div class="dropdown-menu dropdown-menu-end">
                    <div class="locker_img d-flex justify-content-center align-items-center">
                      <img src="/images/lock.png" />
                      <a href="http://161.97.132.85/Designing/Houzmart_admin/change_password.ejs" class="dropdown-item">Change Password</a>
                    </div>
                    <div class="locker_img d-flex justify-content-center align-items-center">
                      <img src="/images/logout.png" />
                      <a href="" class="dropdown-item" style="color: #ff0000" ;>Logout</a>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
            <div class="right-sidebar1">
              <div class="riders_tab">
                <h2>Riders</h2>
                <div class="tab-content table-responsive">
                    <div class="tab-pane fade show active" id="user">
                      <table class="table">
                        <thead>
                          <tr class="tabl-size">
                            <th scope="col"></th>
                            <th scope="col">Full Name</th>
                            <th scope="col">Gender</th>
                            <th scope="col">Total Rides</th>
                            <th scope="col">Signup date</th>
                            <th scope="col">Action</th>
                            <th scope="col">Contact</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="tabel_size">
                            <th scope="row"><img class="profile_img" src="/images/img.png" /></th>
                            <td>Waloi</td>
                            <td>Male</td>
                            <td>2</td>
                            <td>23 Jun,2023</td>
                            <td><button class="btn btn-info data" type="button">Disable</button></td>
                            <td>565646564</td>
                          </tr>
                          <% for(let rider of getRiders) { %>
                            <% const formattedDate = new Date(rider.created_at).toLocaleDateString('en-US', { day: 'numeric', month: 'short', year: 'numeric' }); %>
                            <tr class="tabel_size">
                              <th scope="row"><img class="profile_img" src="<%=userImageUrl + rider.image%>" /></th>
                              <td><%=rider.username %></td>
                              <td><%=rider.gender %></td>
                              <td><%=rider.total_rides %></td>
                              <td><%=formattedDate %></td>
                              <td><button class="btn btn-info data" type="button" onclick="updateButton(this,'<%= rider.id %>')"><%= rider.action %></button></td>
                              <td><%=rider.mobile_number %></td>
                            </tr>
                          <% } %>
                        </tbody>
                      </table>
                    </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      function menuToggle() {
        const toggleMenu = document.querySelector(".menu");
        toggleMenu.classList.toggle("active");
      }
    </script>
    <script>
      // const toggle = document.getElementById("toggle");
      // const left = document.getElementById("left");
      // const bodyClass = document.querySelector("body");
      // toggle.onclick = function () {
      //   toggle.classList.toggle("active");
      //   left.classList.toggle("active");
      //   bodyClass.classList.toggle("bodyOverflow");
      // };
      // 
      
function updateButton(button, riderId) {
  fetch(`/admin/actionOnUser/${riderId}`)
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      // console.log('----------response-----------',response);
      return response.json();
    })
    .then(newButtonText => {
      // console.log('---------newButtonText---------',newButtonText);
      // console.log('---------.data---------',newButtonText.data);
      // console.log('---------button---------',button);
      button.textContent = newButtonText.data;
    })
    .catch(error => {
      console.error('Error occurred while updating the button:', error);
    })
}
</script>
</body>
</html>
